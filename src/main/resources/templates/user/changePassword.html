<!DOCTYPE html>

<html  th:fragment="header" xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Font Awesome -->
<!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.css"
  rel="stylesheet"
/>
</head>
<body>
<div class="bg-info bg-opacity-75 bg-gradient  text-center text-primary" style="height:15%; padding:2%;">
<img width="5%" style="border-radius: 50%; display:inline"src="https://media.istockphoto.com/vectors/letter-linked-business-logo-bh-logo-design-bh-logo-design-for-real-vector-id1339017004?b=1&k=20&m=1339017004&s=170667a&w=0&h=f1X72CJ3_E4rhkpgmjzkIs4l1HcXmv_enlAXNmZSC24="/>
<span style="font-size:200%; font-weight:bold;">Bonne heure</span>
<h5>La banque en ligne</h5>
</div>
<div class=" bg-success p-2 text-white bg-opacity-25
bg-gradient d-flex justify-content-center" style="height:100vh;">
 
	     <form th:action="@{/changePassword}" method="post" onsubmit="return verif();" style="width:70vh; padding-top:5%;">
			    <div th:if="${param.error}" class="alert alert-danger">
			    	Oups !
			    </div>
			    <div id="error" class="alert alert-danger"></div>
			   
	        <h4 class="modal-title text-center text-primary">Modifier votre password et user name</h4>
	        <br>
	        <div id="motdepassIncorrect"class="text-danger">Mot de pass doit avoir minimum 8 character(minimum 1 character miniscule, 1 character majiscule, 1 digit, 1 character sp√©cial)</div>
					
	        <div class="form-group">
	            <input type="password" th:placeholder="Password" id="pass" name="password" class="form-control" required/>
	        </div>
	        <br>
	         <div class="form-group">
	         <input type="password" placeholder="Confirm Password" id="conf" class="form-control" required/>
	         </div>
	         <br>
	         <div class="form-group">
	         <input type="hidden" name="username" th:value="${username}" class="form-control" required/>
	         </div>
	         <br>
	        <input type="submit" class="btn btn-primary btn-block btn-lg" value="Submit">
	         
	    </form>
</div>
<!-- MDB -->
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.js"
></script>
<script>
document.querySelector("#motdepassIncorrect").style.display = "none";
let	regexPassword= /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&^_-]).{8,}$/;
		pass.addEventListener('keyup', function() {
  if(!(this.value).match(regexPassword)){
	document.querySelector("#motdepassIncorrect").style.display = "block";	
	}
	else{
		document.querySelector("#motdepassIncorrect").style.display = "none";
	}
});
document.querySelector("#error").style.display="none";
function verif(){
	if(document.querySelector("#pass").value == document.querySelector("#conf").value)
	return true;
	else{
	document.querySelector("#error").innerHTML="Mot de pass est incorrect!!";
	document.querySelector("#error").style.display="block";
	return false;
	}
}
</script>
  </body>
</html>