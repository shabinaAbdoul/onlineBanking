<!DOCTYPE html>

<html  th:fragment="header" xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Font Awesome -->
<!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.css"
  rel="stylesheet"
/>
</head>
<body >
<div class="bg-info text-center text-dark" style="height:15%; padding-top:1.5%;">
<h1>Bienvenu La Banque Bon heure</h1>
</div>
 
<div class="container bg-success p-2 text-white bg-opacity-25
bg-gradient d-flex align-items-center justify-content-center" style="height:100vh;">

<div th:if="${param.code}">
<div th:text="${param.userId}"/>
<div id="otp">

	<div class="form-outline mb-4">
    <input type="text" id="otpByUser"  class="form-control  bg-light" />
    <label class="form-label" for="otpByUser">Enter your OTP here</label>
  </div>
   <input type="text" id="otpBySys" th:value=${param.code} class="form-control  bg-light" />
  <button onclick="verifCode();" class="btn btn-primary btn-block mb-4">Verify</button>

</div>
<div id="tryAgain" class="alert alert-danger">
You have entered a wrong OTP <a th:href="@{/register}">try again</a> to create your account
</div>


<div id="fixPassword">
			<form th:action="@{/final/{id}(id=${param.userId})}" method="post" style="width:70vh;">			
			 <h4 class="modal-title text-center text-primary">Create an account</h4>
			  <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="userName" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">User Name</label>
  </div>
  
  <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="password" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Password</label>
  </div>
  <input type="hidden" name="enabled" value="1"/>
 
  
   <button type="submit" class="btn btn-primary btn-block mb-4">Submit</button>
			</form>
			
			</div>
		
 </div>
	<div th:if="${param.code == null}">  
<form th:action="@{/register}" method="post" style="width:70vh;">
  <!-- 2 column grid layout with text inputs for the first and last names -->
  <h4 class="modal-title text-center text-primary">Create an account</h4>
	        <br>
  <div class="row mb-4">
    <div class="col">
      <div class="form-outline">
        <input type="text" name="firstName" id="form3Example1" class="form-control bg-light" />
        <label class="form-label" for="form3Example1">First name</label>
      </div>
    </div>
    <div class="col">
      <div class="form-outline">
        <input type="text" name="lastName" id="form3Example2" class="form-control  bg-light" />
        <label class="form-label" for="form3Example2">Last name</label>
      </div>
    </div>
  </div>
  

  <!-- Email input -->
  <div class="form-outline mb-4">
    <input type="email" id="form3Example3" name="email" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Email address</label>
  </div>
  
  <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="mobile" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Mobile number</label>
  </div>
  
  <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="address" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Address</label>
  </div>
   <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="ville" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Ville</label>
  </div>
   <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="codePostal" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Code Postal</label>
  </div>
  
   
  
  <button type="submit" class="btn btn-primary btn-block mb-4">Send OTP</button>

</form>
	</div> 
</div>
<!-- MDB -->
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.js"
></script>
<script>
document.querySelector("#fixPassword").style.display="none";
document.querySelector("#tryAgain").style.display="none";
function verifCode(){
	let otpUser=document.querySelector("#otpByUser").value;
	let otpSys=document.querySelector("#otpBySys").value;
	if(otpUser == otpSys){
		document.querySelector("#otp").style.display="none";
		document.querySelector("#fixPassword").style.display="block";
		
	}
	else{
		document.querySelector("#otp").style.display="none";
		document.querySelector("#tryAgain").style.display="block";
		
	}
}
</script>
  </body>
</html>