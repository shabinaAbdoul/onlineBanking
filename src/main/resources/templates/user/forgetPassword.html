<!DOCTYPE html>

<html  th:fragment="header" xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Font Awesome -->
<!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.css"
  rel="stylesheet"
/>
</head>
<body>
<div class="bg-info bg-opacity-75 bg-gradient  text-center text-primary" style="height:15%; padding:2%;">
<img width="5%" style="border-radius: 50%; display:inline"src="https://media.istockphoto.com/vectors/letter-linked-business-logo-bh-logo-design-bh-logo-design-for-real-vector-id1339017004?b=1&k=20&m=1339017004&s=170667a&w=0&h=f1X72CJ3_E4rhkpgmjzkIs4l1HcXmv_enlAXNmZSC24="/>
<span style="font-size:200%; font-weight:bold;">Bonne heure</span>
<h5>La banque en ligne</h5>
</div>
<div class=" bg-success p-2 text-white bg-opacity-25
bg-gradient d-flex justify-content-center" style="height:100vh;">
<div th:if="${otpSys != null}">
<div id="error" class="alert alert-danger">OTP est incorrect <a th:href="@{/forgetPassword}"> r'envoyer l'OTP</a></div>
  <form th:action="@{/changePassword}" method="get" onsubmit="return verifOtp();"style="width:70vh; padding-top:5%;">
		<label class="text-dark">Saisi l'OTP qui a été envoyé par votre mail <b th:text="${email}"></b></label>
		<div class="form-group">
	            <input type="text" id="otp" th:placeholder="OTP" class="form-control" required/>
	        </div>
	        <input type="hidden" id="otpSys" th:value="${otpSys}">
	        <input type="hidden" name="username" th:value="${username}">
 <button type="submit" class="btn btn-primary btn-block btn-lg">Ok</button>
 
  </form>
</div>
<div th:if="${otpSys == null}">
	     <form th:action="@{/forgetPassword}" method="post" style="width:70vh; padding-top:5%;">
			    <div th:if="${param.error}" class="alert alert-danger">
			    	Oups !
			    </div>
	        <h4 class="modal-title text-center text-primary">Saisi votre nom de utilisateur</h4>
	        <br>
	        <div class="form-group">
	            <input type="text" id="username" name="username" th:placeholder="UserName" class="form-control" required/>
	        </div>
	        <br>
	        <input type="submit" class="btn btn-primary btn-block btn-lg" value="Envoyer otp !">
	         <a th:href="@{/register}"type="button" class="btn btn-primary btn-block btn-lg">Je m'inscrire !</a>
	    </form>
</div>
</div>
<!-- MDB -->
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.js"
></script>
<script>
document.querySelector("#error").style.display="none";
function verifOtp(){
	let otp=document.querySelector("#otp").value;
	let otpSys=document.querySelector("#otpSys").value;
	if(otp == otpSys){
		return true;
		}
		else{
			document.querySelector("#error").style.display="block";
		return false;
		}		
}
</script>
  </body>
</html>
