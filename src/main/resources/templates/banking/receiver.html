<div th:replace="fragments/header::header"></div>
<div th:replace="fragments/nav::nav"></div>
<div class="d-flex justify-content-center" style="padding-top:2%; ">
<form th:action="@{/receiver}" method="post" style="width:70vh;" onSubmit="return verifReceiver();">
  <!-- 2 column grid layout with text inputs for the first and last names -->
  <h4 class="modal-title text-center text-primary">Ajouter un nouveau bénéficiaire</h4>
  <div id="receiverError" class="alert alert-danger"> Les champs Nom et Numéro IBAN sont obligatoires</div>
	        <br>
  <div th:if="${param.notExist}"><div class="alert alert-danger">Le numéro d'IBAN vous saisi n'est pas valide!!</div></div>
    <div class="form-outline mb-4">
    <input type="text" id="nom" name="nom" class="form-control  bg-light" />
    <label class="form-label" for="nom">Nom<span class="text-danger" >*<span></label>
  </div>
  
 <div class="form-outline mb-4">
    <input type="text" id="numIban" name="numIban" class="form-control  bg-light" />
    <label class="form-label" for="numIban">Numéro d'IBAN <span class="text-danger" >*<span></label>
  </div>
  
  <div class="form-outline mb-4">
    <input type="email" id="form3Example3" name="email" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Address Mail</label>
  </div>
  
  <div class="form-outline mb-4">
    <input type="text" id="form3Example3" name="mobile" class="form-control  bg-light" />
    <label class="form-label" for="form3Example3">Numéro de portable</label>
  </div>
  <button type="submit" class="btn btn-primary btn-block mb-4">Ajouter</button>
</form>
</div>
<div class="table-responsive">
<table class="table table-striped table-bordered table-info bg-opacity-75
bg-gradient " id="ccaTable">
  <thead class="black white-text">
    <tr>
      <th scope="col">Nom </th>
      <th scope="col">Email</th>
      <th scope="col">Mobile</th>
      <th scope="col">Numéro d'IBAN</th>    
    </tr>
  </thead>
  <tbody> 
  
   <th:block th:each="receiver : ${receivers}">
      <tr>
         <td th:text="${receiver.nom}">...</td>
         <td th:text="${receiver.email}">...</td>
         <td th:text="${receiver.mobile}">...</td>
         <td th:text="${receiver.numIban}">...</td>           
        <td><a th:href="@{/updateReceiver/{id}(id=${receiver.id})}"> <button type="button" class="btn btn-primary me-3">Edit</button></a> </td>
     <td><button type="button" class="btn btn-primary" data-mdb-toggle="modal" th:attr="data-mdb-target='#receiverDeleteModal'+${receiver.id}">
  Delete
</button>
<!-- Modal -->
<div
  class="modal fade"
  th:attr="id='receiverDeleteModal'+${receiver.id}"
  data-mdb-backdrop="static"
  data-mdb-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" ><span> Voulez vous vraitement supprimer </span><span th:text=${receiver.nom}></span><span>?</span></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-mdb-dismiss="modal">Non</button>
        <a th:href="@{/deleteReceiver/{id}(id=${receiver.id})}"><button type="button" class="btn btn-primary">Oui</button></a>
      </div>
    </div>
  </div>
</div></td>
      </tr>
     
   </th:block>

 
  </tbody>
</table>
</div>
</div>
<div th:replace="fragments/footer::footer"></div>